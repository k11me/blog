<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.5.2">Jekyll</generator><link href="http://localhost:4000/atom.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2018-11-04T20:07:28+08:00</updated><id>http://localhost:4000/</id><title type="html">Keleven.Me</title><subtitle>千变万化的是世界</subtitle><author><name>K11</name></author><entry><title type="html">好想……</title><link href="http://localhost:4000/living/2018/11/03/blog/" rel="alternate" type="text/html" title="好想……" /><published>2018-11-03T08:00:00+08:00</published><updated>2018-11-03T08:00:00+08:00</updated><id>http://localhost:4000/living/2018/11/03/blog</id><content type="html" xml:base="http://localhost:4000/living/2018/11/03/blog/">&lt;h1 id=&quot;好想什么呢&quot;&gt;好想什么呢&lt;/h1&gt;

&lt;p&gt;来猜猜吧&lt;/p&gt;

&lt;h2 id=&quot;logs-部分&quot;&gt;logs 部分&lt;/h2&gt;

&lt;p&gt;结合&lt;code class=&quot;highlighter-rouge&quot;&gt;laravel logs&lt;/code&gt;重构&lt;/p&gt;

&lt;p&gt;在&lt;code class=&quot;highlighter-rouge&quot;&gt;laravel logs&lt;/code&gt;基础上将&lt;code class=&quot;highlighter-rouge&quot;&gt;logs&lt;/code&gt;存入数据库&lt;/p&gt;

&lt;p&gt;先下&lt;code class=&quot;highlighter-rouge&quot;&gt;config\logging&lt;/code&gt;中添加&lt;code class=&quot;highlighter-rouge&quot;&gt;channels&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;如下&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;'channels' =&amp;gt; [
    'stack' =&amp;gt; [
        'driver' =&amp;gt; 'stack',
        'channels' =&amp;gt; ['mysql'],
    ],
	'mysql' =&amp;gt; [
	    'driver' =&amp;gt; 'custom',
	    'name' =&amp;gt; 'mysql',
	    'via' =&amp;gt; App\Logging\MySQLLogger::class,
	    'level' =&amp;gt; 'debug',
	],
]
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;新建&lt;code class=&quot;highlighter-rouge&quot;&gt;MySQLLogger&lt;/code&gt; 这部分可以查看&lt;code class=&quot;highlighter-rouge&quot;&gt;laravel 文档&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Logger&lt;/code&gt; 的 &lt;code class=&quot;highlighter-rouge&quot;&gt;name&lt;/code&gt; 不能正常传入，问题暂时没找到根源&lt;/p&gt;

&lt;p&gt;于是进行手动传入&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;App\Logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Monolog\Logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;App\Logging\AdminLogsHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MySQLLogger&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__invoke&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'APP_NAME'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;LogsHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
                    &lt;span class=&quot;nv&quot;&gt;$config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'level'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
                    &lt;span class=&quot;nv&quot;&gt;$config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;之后是&lt;code class=&quot;highlighter-rouge&quot;&gt;AdminLogsHandler&lt;/code&gt; 用于将&lt;code class=&quot;highlighter-rouge&quot;&gt;logs&lt;/code&gt;提交到数据库&lt;/p&gt;

&lt;p&gt;这里也可以复写其他方法，可以自行查看&lt;code class=&quot;highlighter-rouge&quot;&gt;Monolog\Logger&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;App\Logging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Monolog\Logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Monolog\Handler\AbstractProcessingHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;App\Models\Logs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AdminLogsHandler&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;AbstractProcessingHandler&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__construct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$level&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;__construct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$level&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;Logs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;
            &lt;span class=&quot;s1&quot;&gt;'channel'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;s1&quot;&gt;'message'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'message'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
            &lt;span class=&quot;s1&quot;&gt;'level'&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'level_name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
            &lt;span class=&quot;s1&quot;&gt;'context'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'context'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;App\Models\Logs&lt;/code&gt; 注意要添加批量写入&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    protected $fillable = [
        'channel',
        'message',
        'level',
        'context'
    ];
    protected $casts = [
        'context' =&amp;gt; 'array',
    ];
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;数据迁移如下&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$table-&amp;gt;increments('id');
$table-&amp;gt;string('channel')-&amp;gt;index();
$table-&amp;gt;enum('level', [
    'DEBUG',
    'INFO',
    'NOTICE',
    'WARNING',
    'ERROR',
    'CRITICAL',
    'ALERT',
    'EMERGENCY'
])-&amp;gt;default('INFO');
$table-&amp;gt;longText('message');
$table-&amp;gt;text('context');
$table-&amp;gt;timestamps();
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;之后可以使用&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Log::info('message' , ['id' =&amp;gt; $id])&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;以上&quot;&gt;以上&lt;/h2&gt;</content><author><name>K11</name></author><category term="日记" /><category term="laravel" /><summary type="html">好想什么呢 来猜猜吧 logs 部分 结合laravel logs重构 在laravel logs基础上将logs存入数据库 先下config\logging中添加channels 如下 'channels' =&amp;gt; [ 'stack' =&amp;gt; [ 'driver' =&amp;gt; 'stack', 'channels' =&amp;gt; ['mysql'], ], 'mysql' =&amp;gt; [ 'driver' =&amp;gt; 'custom', 'name' =&amp;gt; 'mysql', 'via' =&amp;gt; App\Logging\MySQLLogger::class, 'level' =&amp;gt; 'debug', ], ] 新建MySQLLogger 这部分可以查看laravel 文档 Logger 的 name 不能正常传入，问题暂时没找到根源 于是进行手动传入 &amp;lt;?php namespace App\Logging; use Monolog\Logger; use App\Logging\AdminLogsHandler; class MySQLLogger { public function __invoke(array $config) { return new Logger( env('APP_NAME'), [ new LogsHandler( $config['level'], $config['name'] ) ] ); } } 之后是AdminLogsHandler 用于将logs提交到数据库 这里也可以复写其他方法，可以自行查看Monolog\Logger &amp;lt;?php namespace App\Logging; use Monolog\Logger; use Monolog\Handler\AbstractProcessingHandler; use App\Models\Logs; class AdminLogsHandler extends AbstractProcessingHandler { private $name; public function __construct($level, $name) { parent::__construct($level); $this-&amp;gt;name = $name; } protected function write(array $record) { Logs::create([ 'channel' =&amp;gt; $this-&amp;gt;name, 'message' =&amp;gt; $record['message'], 'level' =&amp;gt; $record['level_name'], 'context' =&amp;gt; $record['context'] ]); } } App\Models\Logs 注意要添加批量写入 protected $fillable = [ 'channel', 'message', 'level', 'context' ]; protected $casts = [ 'context' =&amp;gt; 'array', ]; 数据迁移如下 $table-&amp;gt;increments('id'); $table-&amp;gt;string('channel')-&amp;gt;index(); $table-&amp;gt;enum('level', [ 'DEBUG', 'INFO', 'NOTICE', 'WARNING', 'ERROR', 'CRITICAL', 'ALERT', 'EMERGENCY' ])-&amp;gt;default('INFO'); $table-&amp;gt;longText('message'); $table-&amp;gt;text('context'); $table-&amp;gt;timestamps(); 之后可以使用 Log::info('message' , ['id' =&amp;gt; $id]) 以上</summary></entry><entry><title type="html">智力上线🙂</title><link href="http://localhost:4000/living/2018/11/01/blog/" rel="alternate" type="text/html" title="智力上线🙂" /><published>2018-11-01T08:00:00+08:00</published><updated>2018-11-01T08:00:00+08:00</updated><id>http://localhost:4000/living/2018/11/01/blog</id><content type="html" xml:base="http://localhost:4000/living/2018/11/01/blog/">&lt;h1 id=&quot;智力上线&quot;&gt;智力上线&lt;/h1&gt;

&lt;h2 id=&quot;27号的份&quot;&gt;27号的份&lt;/h2&gt;

&lt;p&gt;机械劳动久了，智商就下线了&lt;/p&gt;

&lt;p&gt;可以快速解决问题，要重复好多次也是蛮蠢的&lt;/p&gt;

&lt;p&gt;可是一直进行无创造劳动吧 智商也就慢慢休眠了_(:з」∠)_&lt;/p&gt;

&lt;p&gt;之后美名其曰代码可读性提高了，&lt;/p&gt;

&lt;p&gt;不过函数用多了一样不容易读，啊啊啊 好矛盾啊&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;29日的份&quot;&gt;29日的份&lt;/h2&gt;

&lt;p&gt;定时自动调整权限完成了~~&lt;/p&gt;

&lt;p&gt;加上之前的权限方便能安心了了~~ 暂时~~&lt;/p&gt;

&lt;p&gt;程序什么的 是要不断改进的&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;11月1号的份&quot;&gt;11月1号的份&lt;/h2&gt;

&lt;p&gt;一小步与一大步，真的只是差了一点点，现在看看方便了不少。&lt;/p&gt;

&lt;p&gt;几天前 明白了一些事儿 很意外的 也是很有意思&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;providers&lt;/code&gt; 定义成了 &lt;code class=&quot;highlighter-rouge&quot;&gt;Facades&lt;/code&gt; 用起来更方便了&lt;/p&gt;

&lt;p&gt;新建&lt;code class=&quot;highlighter-rouge&quot;&gt;class&lt;/code&gt; 下面这样写 之后要注意到&lt;code class=&quot;highlighter-rouge&quot;&gt;config\app.php&lt;/code&gt;中绑定&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt; 

&lt;span class=&quot;k&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;App\Facades&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 

&lt;span class=&quot;k&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Illuminate\Support\Facades\Facade&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CustomService&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Facade&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getFacadeAccessor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; 
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'CustomService'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;</content><author><name>K11</name></author><category term="日记" /><category term="laravel" /><summary type="html">智力上线 27号的份 机械劳动久了，智商就下线了 可以快速解决问题，要重复好多次也是蛮蠢的 可是一直进行无创造劳动吧 智商也就慢慢休眠了_(:з」∠)_ 之后美名其曰代码可读性提高了， 不过函数用多了一样不容易读，啊啊啊 好矛盾啊 29日的份 定时自动调整权限完成了~~ 加上之前的权限方便能安心了了~~ 暂时~~ 程序什么的 是要不断改进的 11月1号的份 一小步与一大步，真的只是差了一点点，现在看看方便了不少。 几天前 明白了一些事儿 很意外的 也是很有意思 providers 定义成了 Facades 用起来更方便了 新建class 下面这样写 之后要注意到config\app.php中绑定 &amp;lt;?php namespace App\Facades; use Illuminate\Support\Facades\Facade; class CustomService extends Facade { protected static function getFacadeAccessor() { return 'CustomService'; } }</summary></entry><entry><title type="html">几天份</title><link href="http://localhost:4000/living/2018/10/25/blog/" rel="alternate" type="text/html" title="几天份" /><published>2018-10-25T08:00:00+08:00</published><updated>2018-10-25T08:00:00+08:00</updated><id>http://localhost:4000/living/2018/10/25/blog</id><content type="html" xml:base="http://localhost:4000/living/2018/10/25/blog/">&lt;h1 id=&quot;23号的份&quot;&gt;23号的份&lt;/h1&gt;

&lt;h2 id=&quot;vue-当前页刷新&quot;&gt;vue 当前页刷新&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;location.reload()
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;其他&quot;&gt;其他&lt;/h2&gt;

&lt;p&gt;3合一验证 完成了&lt;/p&gt;

&lt;p&gt;后端做成服务提供者了&lt;/p&gt;

&lt;p&gt;用起来容易了不少&lt;/p&gt;

&lt;p&gt;admin 部分要收尾了 😊&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;24号的份&quot;&gt;24号的份&lt;/h1&gt;

&lt;p&gt;为一些请求添加二步验证&lt;/p&gt;

&lt;p&gt;之后是定时服务 与 logs&lt;/p&gt;

&lt;p&gt;还有 &lt;code class=&quot;highlighter-rouge&quot;&gt;admin&lt;/code&gt; 基本信息页面&lt;/p&gt;

&lt;p&gt;游戏模式有一次眉目了&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;25号的份&quot;&gt;25号的份&lt;/h1&gt;

&lt;h2 id=&quot;laravel下错误返回分类&quot;&gt;laravel下错误返回分类&lt;/h2&gt;

&lt;p&gt;在一些情况下想要对不同的请求做不同错误的返回&lt;/p&gt;

&lt;p&gt;可以使用&lt;code class=&quot;highlighter-rouge&quot;&gt;$request-&amp;gt;ajax()&lt;/code&gt;来识别&lt;code class=&quot;highlighter-rouge&quot;&gt;ajax&lt;/code&gt;请求&lt;/p&gt;

&lt;p&gt;对于自定义错误返回非常有用&lt;/p&gt;

&lt;p&gt;更新&lt;code class=&quot;highlighter-rouge&quot;&gt;node&lt;/code&gt; 后包报错，直接删除&lt;code class=&quot;highlighter-rouge&quot;&gt;node_modules&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;之后&lt;code class=&quot;highlighter-rouge&quot;&gt;npm install&lt;/code&gt; 可以解决大多数问题&lt;/p&gt;</content><author><name>K11</name></author><category term="日记" /><category term="laravel" /><summary type="html">23号的份 vue 当前页刷新 location.reload() 其他 3合一验证 完成了 后端做成服务提供者了 用起来容易了不少 admin 部分要收尾了 😊 24号的份 为一些请求添加二步验证 之后是定时服务 与 logs 还有 admin 基本信息页面 游戏模式有一次眉目了 25号的份 laravel下错误返回分类 在一些情况下想要对不同的请求做不同错误的返回 可以使用$request-&amp;gt;ajax()来识别ajax请求 对于自定义错误返回非常有用 更新node 后包报错，直接删除node_modules 之后npm install 可以解决大多数问题</summary></entry><entry><title type="html">使用 postman 进行 post</title><link href="http://localhost:4000/living/2018/10/21/blog/" rel="alternate" type="text/html" title="使用 postman 进行 post" /><published>2018-10-21T08:00:00+08:00</published><updated>2018-10-21T08:00:00+08:00</updated><id>http://localhost:4000/living/2018/10/21/blog</id><content type="html" xml:base="http://localhost:4000/living/2018/10/21/blog/">&lt;h1 id=&quot;使用-postman-进行-post&quot;&gt;使用 postman 进行 post&lt;/h1&gt;

&lt;p&gt;使用&lt;code class=&quot;highlighter-rouge&quot;&gt;postman&lt;/code&gt; 直接 &lt;code class=&quot;highlighter-rouge&quot;&gt;post&lt;/code&gt; 的方法&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;laravel&lt;/code&gt; 本身有&lt;code class=&quot;highlighter-rouge&quot;&gt;CSRF&lt;/code&gt; 直接使用&lt;code class=&quot;highlighter-rouge&quot;&gt;post&lt;/code&gt; 、 &lt;code class=&quot;highlighter-rouge&quot;&gt;put&lt;/code&gt; 等等会被阻断&lt;/p&gt;

&lt;p&gt;找到一个可以解决办法&lt;/p&gt;

&lt;h2 id=&quot;postman-chrome-插件版本&quot;&gt;postman chrome 插件版本&lt;/h2&gt;

&lt;p&gt;新建一个&lt;code class=&quot;highlighter-rouge&quot;&gt;environment&lt;/code&gt; 并切换到新建，右上⚙位置&lt;/p&gt;

&lt;p&gt;找一个&lt;code class=&quot;highlighter-rouge&quot;&gt;get&lt;/code&gt;请求 在&lt;code class=&quot;highlighter-rouge&quot;&gt;Tests&lt;/code&gt;标签下输入&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;var xsrfCookie = postman.getResponseCookie(&quot;XSRF-TOKEN&quot;);
postman.setEnvironmentVariable(&quot;XSRF-TOKEN&quot;, xsrfCookie.value);
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;`` 对应该的是第二行要注意下。&lt;/p&gt;

&lt;p&gt;用于获取&lt;code class=&quot;highlighter-rouge&quot;&gt;XSRF-TOKEN&lt;/code&gt;的值。&lt;/p&gt;

&lt;p&gt;查看&lt;code class=&quot;highlighter-rouge&quot;&gt;environment&lt;/code&gt;中 &lt;code class=&quot;highlighter-rouge&quot;&gt;XSRF-TOKEN&lt;/code&gt; 是否被正确传入。右上👁位置&lt;/p&gt;

&lt;p&gt;确认后在&lt;code class=&quot;highlighter-rouge&quot;&gt;post&lt;/code&gt; 的&lt;code class=&quot;highlighter-rouge&quot;&gt;Headers&lt;/code&gt; 中添加&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;X-XSRF-TOKEN : &lt;/code&gt;&lt;/p&gt;

&lt;p&gt;之后就可以正常提交&lt;code class=&quot;highlighter-rouge&quot;&gt;post&lt;/code&gt;了&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;注意：laravel XSRF-TOKEN 有时效性 注意更新&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;当&lt;code class=&quot;highlighter-rouge&quot;&gt;XSRF-TOKEN&lt;/code&gt; 中有特殊字符，例如&lt;code class=&quot;highlighter-rouge&quot;&gt;%&lt;/code&gt;时，&lt;code class=&quot;highlighter-rouge&quot;&gt;laravel X-XSRF-TOKEN&lt;/code&gt; 验证会失败&lt;/p&gt;

&lt;p&gt;主要是为&lt;code class=&quot;highlighter-rouge&quot;&gt;postman&lt;/code&gt; 对&lt;code class=&quot;highlighter-rouge&quot;&gt;XSRF-TOKEN&lt;/code&gt;识别有问题，桌面版本没有这个问题&lt;/p&gt;

&lt;h2 id=&quot;postman-桌面版&quot;&gt;postman 桌面版&lt;/h2&gt;

&lt;p&gt;同上&lt;code class=&quot;highlighter-rouge&quot;&gt;Tests&lt;/code&gt;标签可以写成&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pm.environment.set(&quot;xsrf-token&quot;, decodeURIComponent(pm.cookies.get(&quot;XSRF-TOKEN&quot;)))
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;使用&lt;code class=&quot;highlighter-rouge&quot;&gt;laravel valet&lt;/code&gt; 时，&lt;code class=&quot;highlighter-rouge&quot;&gt;postman&lt;/code&gt;不能正确访问域名……&lt;/p&gt;

&lt;p&gt;原因&lt;code class=&quot;highlighter-rouge&quot;&gt;valet&lt;/code&gt;产生的&lt;code class=&quot;highlighter-rouge&quot;&gt;SSL&lt;/code&gt;证书，所以被阻挡，手动关闭后正常使用&lt;/p&gt;

&lt;p&gt;要关闭的位置&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;settings&lt;/code&gt; -&amp;gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;SSL certificate verifcation&lt;/code&gt; -&amp;gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;off&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;之后就可以正常使用了&lt;/p&gt;

&lt;p&gt;使用&lt;code class=&quot;highlighter-rouge&quot;&gt;valet&lt;/code&gt;时 &lt;code class=&quot;highlighter-rouge&quot;&gt;link&lt;/code&gt; 与 &lt;code class=&quot;highlighter-rouge&quot;&gt;park&lt;/code&gt; 混用会报错！&lt;/p&gt;</content><author><name>K11</name></author><category term="日记" /><category term="postman" /><category term="laravel" /><summary type="html">使用 postman 进行 post 使用postman 直接 post 的方法 laravel 本身有CSRF 直接使用post 、 put 等等会被阻断 找到一个可以解决办法 postman chrome 插件版本 新建一个environment 并切换到新建，右上⚙位置 找一个get请求 在Tests标签下输入 var xsrfCookie = postman.getResponseCookie(&quot;XSRF-TOKEN&quot;); postman.setEnvironmentVariable(&quot;XSRF-TOKEN&quot;, xsrfCookie.value); `` 对应该的是第二行要注意下。 用于获取XSRF-TOKEN的值。 查看environment中 XSRF-TOKEN 是否被正确传入。右上👁位置 确认后在post 的Headers 中添加 X-XSRF-TOKEN : 之后就可以正常提交post了 注意：laravel XSRF-TOKEN 有时效性 注意更新 当XSRF-TOKEN 中有特殊字符，例如%时，laravel X-XSRF-TOKEN 验证会失败 主要是为postman 对XSRF-TOKEN识别有问题，桌面版本没有这个问题 postman 桌面版 同上Tests标签可以写成 pm.environment.set(&quot;xsrf-token&quot;, decodeURIComponent(pm.cookies.get(&quot;XSRF-TOKEN&quot;))) 使用laravel valet 时，postman不能正确访问域名…… 原因valet产生的SSL证书，所以被阻挡，手动关闭后正常使用 要关闭的位置 settings -&amp;gt; SSL certificate verifcation -&amp;gt; off 之后就可以正常使用了 使用valet时 link 与 park 混用会报错！</summary></entry><entry><title type="html">几天的份</title><link href="http://localhost:4000/living/2018/10/18/blog/" rel="alternate" type="text/html" title="几天的份" /><published>2018-10-18T08:00:00+08:00</published><updated>2018-10-18T08:00:00+08:00</updated><id>http://localhost:4000/living/2018/10/18/blog</id><content type="html" xml:base="http://localhost:4000/living/2018/10/18/blog/">&lt;h1 id=&quot;15号的份&quot;&gt;15号的份&lt;/h1&gt;

&lt;h2 id=&quot;染黑了&quot;&gt;染黑了&lt;/h2&gt;

&lt;p&gt;自己都感觉到内心在向着无底的黑暗靠近&lt;/p&gt;

&lt;p&gt;新键盘并没有人体工程学的好用&lt;/p&gt;

&lt;p&gt;估计以后都只会选择人体工程学的了&lt;/p&gt;

&lt;h2 id=&quot;开始处理权限了&quot;&gt;开始处理权限了&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;admin&lt;/code&gt;的基本部分快做完了&lt;/p&gt;

&lt;p&gt;之后是一般用户数据了&lt;/p&gt;

&lt;p&gt;按照计划的一样进行扩展&lt;/p&gt;

&lt;p&gt;说句自满的话&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;它不仅仅是一个游戏&lt;/code&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;16号的份&quot;&gt;16号的份&lt;/h1&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;v-for&lt;/code&gt; 不能放在顶级标签上，会报错！&lt;/p&gt;

&lt;p&gt;更新了一下&lt;code class=&quot;highlighter-rouge&quot;&gt;docker&lt;/code&gt;镜像&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;role&lt;/code&gt; 部分也完成了……&lt;/p&gt;

&lt;p&gt;现在又累又饿……&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;18号的份&quot;&gt;18号的份&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;role&lt;/code&gt; 部分修正完成~~&lt;/p&gt;

&lt;p&gt;过程中确实补增了许多东西&lt;/p&gt;

&lt;p&gt;到验证了~~&lt;/p&gt;</content><author><name>K11</name></author><category term="日记" /><category term="vue" /><category term="laravel" /><summary type="html">15号的份 染黑了 自己都感觉到内心在向着无底的黑暗靠近 新键盘并没有人体工程学的好用 估计以后都只会选择人体工程学的了 开始处理权限了 admin的基本部分快做完了 之后是一般用户数据了 按照计划的一样进行扩展 说句自满的话 它不仅仅是一个游戏 16号的份 v-for 不能放在顶级标签上，会报错！ 更新了一下docker镜像 role 部分也完成了…… 现在又累又饿…… 18号的份 role 部分修正完成~~ 过程中确实补增了许多东西 到验证了~~</summary></entry><entry><title type="html">11号的份</title><link href="http://localhost:4000/living/2018/10/14/blog/" rel="alternate" type="text/html" title="11号的份" /><published>2018-10-14T08:00:00+08:00</published><updated>2018-10-14T08:00:00+08:00</updated><id>http://localhost:4000/living/2018/10/14/blog</id><content type="html" xml:base="http://localhost:4000/living/2018/10/14/blog/">&lt;h1 id=&quot;11号的份&quot;&gt;11号的份&lt;/h1&gt;

&lt;h2 id=&quot;队列&quot;&gt;队列&lt;/h2&gt;

&lt;p&gt;将特定 信息通知 推送到指定队列&lt;/p&gt;

&lt;p&gt;修改&lt;code class=&quot;highlighter-rouge&quot;&gt;horizon&lt;/code&gt; 后&lt;/p&gt;

&lt;p&gt;可以使用&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$user-&amp;gt;notify((new SendEmail($Token))-&amp;gt;onQueue('mail'));
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;或&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;use Notification;
Notification::send($user, (new SendEmail($Token))-&amp;gt;onQueue('mail'));
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;h2 id=&quot;roles&quot;&gt;roles&lt;/h2&gt;

&lt;p&gt;需要注意&lt;code class=&quot;highlighter-rouge&quot;&gt;guard&lt;/code&gt;对应&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;view&lt;/code&gt;与&lt;code class=&quot;highlighter-rouge&quot;&gt;models&lt;/code&gt; 要注意同步&lt;/p&gt;

&lt;p&gt;在&lt;code class=&quot;highlighter-rouge&quot;&gt;blade&lt;/code&gt; 中使用时&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;@role('role' , 'guard')
something
@endrole
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;在路由中使用时&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Route::group(['middleware' =&amp;gt; ['auth:admin' , 'role:admin']], function () {

});
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;也可以在控制器中使用&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;public function __construct()
{
    $this-&amp;gt;middleware(['role:admin' , 'auth:admin']);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;14号的份&quot;&gt;14号的份&lt;/h1&gt;

&lt;h2 id=&quot;find-与-where-的坑&quot;&gt;find 与 where 的坑&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;find&lt;/code&gt; 不能准确 查找到对应条目&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;where&lt;/code&gt; 则可以，之后只有有意识的替换&lt;code class=&quot;highlighter-rouge&quot;&gt;find&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;register&lt;/code&gt;的后端调整完成了~~~&lt;/p&gt;

&lt;p&gt;大概这种感觉&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2018/10/14/5bc33df12e03a.png&quot; alt=&quot;屏幕快照 2018-10-14 20.58.44&quot; /&gt;&lt;/p&gt;</content><author><name>K11</name></author><category term="日记" /><category term="laravel" /><summary type="html">11号的份 队列 将特定 信息通知 推送到指定队列 修改horizon 后 可以使用 $user-&amp;gt;notify((new SendEmail($Token))-&amp;gt;onQueue('mail')); 或 use Notification; Notification::send($user, (new SendEmail($Token))-&amp;gt;onQueue('mail')); roles 需要注意guard对应 view与models 要注意同步 在blade 中使用时 @role('role' , 'guard') something @endrole 在路由中使用时 Route::group(['middleware' =&amp;gt; ['auth:admin' , 'role:admin']], function () { }); 也可以在控制器中使用 public function __construct() { $this-&amp;gt;middleware(['role:admin' , 'auth:admin']); } 14号的份 find 与 where 的坑 find 不能准确 查找到对应条目 where 则可以，之后只有有意识的替换find register的后端调整完成了~~~ 大概这种感觉</summary></entry><entry><title type="html">10号的份</title><link href="http://localhost:4000/living/2018/10/10/blog/" rel="alternate" type="text/html" title="10号的份" /><published>2018-10-10T08:00:00+08:00</published><updated>2018-10-10T08:00:00+08:00</updated><id>http://localhost:4000/living/2018/10/10/blog</id><content type="html" xml:base="http://localhost:4000/living/2018/10/10/blog/">&lt;h2 id=&quot;lavavel-valet&quot;&gt;lavavel valet&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;valet share&lt;/code&gt; 在TLS的情况下会返回&lt;code class=&quot;highlighter-rouge&quot;&gt;301&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;可以确定为&lt;code class=&quot;highlighter-rouge&quot;&gt;valet v2.1.1&lt;/code&gt; 的 BUG&lt;/p&gt;

&lt;p&gt;可以先&lt;code class=&quot;highlighter-rouge&quot;&gt;valet unsecure&lt;/code&gt; 再 &lt;code class=&quot;highlighter-rouge&quot;&gt;valet share&lt;/code&gt; 关闭&lt;code class=&quot;highlighter-rouge&quot;&gt;TLS&lt;/code&gt; 和裸奔没区别 可以用来进行暂时测试&lt;/p&gt;

&lt;p&gt;汇率已经到&lt;code class=&quot;highlighter-rouge&quot;&gt;7.5&lt;/code&gt;了……&lt;/p&gt;</content><author><name>K11</name></author><category term="日记" /><category term="laravel" /><summary type="html">lavavel valet valet share 在TLS的情况下会返回301 可以确定为valet v2.1.1 的 BUG 可以先valet unsecure 再 valet share 关闭TLS 和裸奔没区别 可以用来进行暂时测试 汇率已经到7.5了……</summary></entry><entry><title type="html">2FA 基本完成了</title><link href="http://localhost:4000/living/2018/10/04/blog/" rel="alternate" type="text/html" title="2FA 基本完成了" /><published>2018-10-04T08:01:00+08:00</published><updated>2018-10-04T08:01:00+08:00</updated><id>http://localhost:4000/living/2018/10/04/blog</id><content type="html" xml:base="http://localhost:4000/living/2018/10/04/blog/">&lt;h1 id=&quot;2fa-基本完成了&quot;&gt;2FA 基本完成了&lt;/h1&gt;

&lt;p&gt;后端还缺权限的判断，与&lt;code class=&quot;highlighter-rouge&quot;&gt;code message&lt;/code&gt;预制编码&lt;/p&gt;

&lt;p&gt;前端缺特殊&lt;code class=&quot;highlighter-rouge&quot;&gt;code message&lt;/code&gt;的代码响应 指的是2FA的强制验证&lt;/p&gt;

&lt;p&gt;之后要加入批量导入功能 否则会累死~~&lt;/p&gt;

&lt;h2 id=&quot;laravel-model-的坑&quot;&gt;laravel model 的坑&lt;/h2&gt;

&lt;p&gt;使用&lt;code class=&quot;highlighter-rouge&quot;&gt;get()&lt;/code&gt;去取到的数据是&lt;code class=&quot;highlighter-rouge&quot;&gt;array&lt;/code&gt; 而不是&lt;code class=&quot;highlighter-rouge&quot;&gt;object&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;可以手动转换 也可以直接使用 根据需求决定&lt;/p&gt;</content><author><name>K11</name></author><category term="日记" /><category term="laravel" /><summary type="html">2FA 基本完成了 后端还缺权限的判断，与code message预制编码 前端缺特殊code message的代码响应 指的是2FA的强制验证 之后要加入批量导入功能 否则会累死~~ laravel model 的坑 使用get()去取到的数据是array 而不是object 可以手动转换 也可以直接使用 根据需求决定</summary></entry><entry><title type="html">十月的第一天</title><link href="http://localhost:4000/living/2018/10/01/blog/" rel="alternate" type="text/html" title="十月的第一天" /><published>2018-10-01T08:01:00+08:00</published><updated>2018-10-01T08:01:00+08:00</updated><id>http://localhost:4000/living/2018/10/01/blog</id><content type="html" xml:base="http://localhost:4000/living/2018/10/01/blog/">&lt;h1 id=&quot;渐渐的上手了&quot;&gt;渐渐的上手了&lt;/h1&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;laravel&lt;/code&gt; 的错误信息 截取成功&lt;/p&gt;

&lt;p&gt;标准化信息返回问题不大 方法是使用&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;try{
	return 'something';
}catch(\Exception $e){
	return $e-&amp;gt;getMessage();
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;也可以在&lt;code class=&quot;highlighter-rouge&quot;&gt;App\Exceptions\Handler&lt;/code&gt; 的&lt;code class=&quot;highlighter-rouge&quot;&gt;render&lt;/code&gt;中做截取&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;switch($exception-&amp;gt;getMessage()){
	case 'someMessage';
	return 'someMessage';
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;再次感受到先做后端的重要性！！&lt;/p&gt;

&lt;h2 id=&quot;laravel-model-的一些坑&quot;&gt;laravel model 的一些坑&lt;/h2&gt;

&lt;p&gt;如果直接使用&lt;code class=&quot;highlighter-rouge&quot;&gt;find()&lt;/code&gt;后使用&lt;code class=&quot;highlighter-rouge&quot;&gt;delete()&lt;/code&gt;有返回&lt;code class=&quot;highlighter-rouge&quot;&gt;null&lt;/code&gt;的可能性&lt;/p&gt;

&lt;p&gt;可以使用&lt;code class=&quot;highlighter-rouge&quot;&gt;where('id' , $id)&lt;/code&gt;后使用&lt;code class=&quot;highlighter-rouge&quot;&gt;delete()&lt;/code&gt; 就可以避免&lt;code class=&quot;highlighter-rouge&quot;&gt;null&lt;/code&gt;的问题&lt;/p&gt;</content><author><name>K11</name></author><category term="日记" /><category term="vue" /><category term="laravel" /><summary type="html">渐渐的上手了 laravel 的错误信息 截取成功 标准化信息返回问题不大 方法是使用 try{ return 'something'; }catch(\Exception $e){ return $e-&amp;gt;getMessage(); } 也可以在App\Exceptions\Handler 的render中做截取 switch($exception-&amp;gt;getMessage()){ case 'someMessage'; return 'someMessage'; } 再次感受到先做后端的重要性！！ laravel model 的一些坑 如果直接使用find()后使用delete()有返回null的可能性 可以使用where('id' , $id)后使用delete() 就可以避免null的问题</summary></entry><entry><title type="html">记录</title><link href="http://localhost:4000/living/2018/09/28/blog/" rel="alternate" type="text/html" title="记录" /><published>2018-09-28T08:00:00+08:00</published><updated>2018-09-28T08:00:00+08:00</updated><id>http://localhost:4000/living/2018/09/28/blog</id><content type="html" xml:base="http://localhost:4000/living/2018/09/28/blog/">&lt;h1 id=&quot;记录&quot;&gt;记录&lt;/h1&gt;

&lt;p&gt;工作指南&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Code Message UI 部分处理&lt;/li&gt;
  &lt;li&gt;权限手动调整UI&lt;/li&gt;
  &lt;li&gt;权限系统的全局化，将权限处理加入列队&lt;/li&gt;
  &lt;li&gt;特定返回信息的响应&lt;/li&gt;
  &lt;li&gt;二步验证 UI 部分&lt;/li&gt;
  &lt;li&gt;语言全面本地化 【vuex-i18n】&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;code-message&quot;&gt;code message&lt;/h2&gt;

&lt;p&gt;工作详解&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;将全局信息显示功能独立&lt;/li&gt;
  &lt;li&gt;需要为信息增加分页显示&lt;/li&gt;
  &lt;li&gt;搜索结果是否使用通用部分显示&lt;/li&gt;
  &lt;li&gt;识别2fa验证信息并相应【全局模组】&lt;/li&gt;
  &lt;li&gt;新建信息页面 【需要验证2FA】&lt;/li&gt;
  &lt;li&gt;编辑信息页面 【需要验证2FA】&lt;/li&gt;
  &lt;li&gt;删除信息页面 【需要验证2FA】&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;好在&lt;code class=&quot;highlighter-rouge&quot;&gt;2FA&lt;/code&gt;与 &lt;code class=&quot;highlighter-rouge&quot;&gt;code message&lt;/code&gt;可以使用代码手动添加，如果没先做后端真是难以想象，估计是灾难或者加班地狱吧&lt;/p&gt;

&lt;p&gt;反而是语言本地化容易的，可以在休息时完成。&lt;/p&gt;

&lt;p&gt;其他 貌似2FA的优先度比较高，但是信息提示也是非常重要&lt;/p&gt;

&lt;p&gt;对功能分组编写非常重要！一人并行写是比较容易混乱 笔记是一定要的&lt;/p&gt;

&lt;p&gt;好处是发现问题可以及时修正，也要考虑之后的多人协作的效率问题&lt;/p&gt;

&lt;p&gt;多是交给组长处理吧&lt;/p&gt;

&lt;h2 id=&quot;坑&quot;&gt;坑&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;bootstrap 4.*&lt;/code&gt;是没有图标的 需要自己找&lt;/p&gt;

&lt;p&gt;使用&lt;code class=&quot;highlighter-rouge&quot;&gt;fontawesome&lt;/code&gt; 解决了&lt;/p&gt;

&lt;h2 id=&quot;23号的份&quot;&gt;23号的份&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Code Message&lt;/code&gt;资源获取、更新、删除部分的UI完成。 调用与测试正常&lt;/p&gt;

&lt;p&gt;想着将&lt;code class=&quot;highlighter-rouge&quot;&gt;laravel&lt;/code&gt; 自带的UI 使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;vue&lt;/code&gt; 重构 最严重的问题还是在本地化语言上。&lt;/p&gt;

&lt;p&gt;只能将使用的分离，其他的再做打算 😭&lt;/p&gt;

&lt;p&gt;基本上这种感觉&lt;/p&gt;

&lt;p&gt;分页显示也是有做的~&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2018/09/24/5ba7f4b0cbf57.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;26号的份&quot;&gt;26号的份&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;code message&lt;/code&gt; 部分基本完成，之后要调整&lt;code class=&quot;highlighter-rouge&quot;&gt;code&lt;/code&gt;并修正一些细小的地方。&lt;/p&gt;

&lt;p&gt;感到前端与后端的耦合度很高，这样之后是大麻烦，要不要全部使用&lt;code class=&quot;highlighter-rouge&quot;&gt;vuex&lt;/code&gt;呢……&lt;/p&gt;

&lt;p&gt;之后 先处理&lt;code class=&quot;highlighter-rouge&quot;&gt;2fa&lt;/code&gt;与验证吧，&lt;code class=&quot;highlighter-rouge&quot;&gt;2fa&lt;/code&gt; 比如是全局的…… 不跨域使用&lt;code class=&quot;highlighter-rouge&quot;&gt;oauth&lt;/code&gt;的意义不大&lt;/p&gt;

&lt;p&gt;不过使用&lt;code class=&quot;highlighter-rouge&quot;&gt;oauth&lt;/code&gt;容易啊~~ 啊啊啊啊啊~~~&lt;/p&gt;

&lt;h2 id=&quot;28号的份&quot;&gt;28号的份&lt;/h2&gt;

&lt;p&gt;添加&lt;code class=&quot;highlighter-rouge&quot;&gt;2fa ui&lt;/code&gt;了，没什么创造性的劳动……&lt;/p&gt;

&lt;p&gt;使&lt;code class=&quot;highlighter-rouge&quot;&gt;button:hover&lt;/code&gt;文字与样式 随鼠标产生变化&lt;/p&gt;

&lt;p&gt;注意定义&lt;code class=&quot;highlighter-rouge&quot;&gt;css&lt;/code&gt; 否则效果不会有变化&lt;/p&gt;

&lt;p&gt;如果使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;vuex-i18n&lt;/code&gt; 可以使用语言行替代 对应位置文字&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;button&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;btn btn-outline-success&quot;&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;v-on:mouseenter=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;button = 'in button'&quot;&lt;/span&gt; 
&lt;span class=&quot;na&quot;&gt;v-on:mouseleave=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;button = 'out button'&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;na&quot;&gt;button&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'out button'&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;language-css highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;.btn-outline-success&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;:hover&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;.btn-outline-success&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;:not&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;:disabled&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;:not&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;.disabled&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;:active&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;.btn-outline-success&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;:not&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;:disabled&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;:not&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;.disabled&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;:focus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;box-shadow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;none&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;</content><author><name>K11</name></author><category term="日记" /><category term="vue" /><category term="laravel" /><summary type="html">记录 工作指南 Code Message UI 部分处理 权限手动调整UI 权限系统的全局化，将权限处理加入列队 特定返回信息的响应 二步验证 UI 部分 语言全面本地化 【vuex-i18n】 code message 工作详解 将全局信息显示功能独立 需要为信息增加分页显示 搜索结果是否使用通用部分显示 识别2fa验证信息并相应【全局模组】 新建信息页面 【需要验证2FA】 编辑信息页面 【需要验证2FA】 删除信息页面 【需要验证2FA】 好在2FA与 code message可以使用代码手动添加，如果没先做后端真是难以想象，估计是灾难或者加班地狱吧 反而是语言本地化容易的，可以在休息时完成。 其他 貌似2FA的优先度比较高，但是信息提示也是非常重要 对功能分组编写非常重要！一人并行写是比较容易混乱 笔记是一定要的 好处是发现问题可以及时修正，也要考虑之后的多人协作的效率问题 多是交给组长处理吧 坑 bootstrap 4.*是没有图标的 需要自己找 使用fontawesome 解决了 23号的份 Code Message资源获取、更新、删除部分的UI完成。 调用与测试正常 想着将laravel 自带的UI 使用 vue 重构 最严重的问题还是在本地化语言上。 只能将使用的分离，其他的再做打算 😭 基本上这种感觉 分页显示也是有做的~ 26号的份 code message 部分基本完成，之后要调整code并修正一些细小的地方。 感到前端与后端的耦合度很高，这样之后是大麻烦，要不要全部使用vuex呢…… 之后 先处理2fa与验证吧，2fa 比如是全局的…… 不跨域使用oauth的意义不大 不过使用oauth容易啊~~ 啊啊啊啊啊~~~ 28号的份 添加2fa ui了，没什么创造性的劳动…… 使button:hover文字与样式 随鼠标产生变化 注意定义css 否则效果不会有变化 如果使用 vuex-i18n 可以使用语言行替代 对应位置文字 &amp;lt;button type=&quot;button&quot; class=&quot;btn btn-outline-success&quot; v-on:mouseenter=&quot;button = 'in button'&quot; v-on:mouseleave=&quot;button = 'out button'&quot;&amp;gt; &amp;lt;/button&amp;gt; data(){ return { button: 'out button' } } .btn-outline-success:hover{ background-color: red; } .btn-outline-success:not(:disabled):not(.disabled):active{ background-color: red; } .btn-outline-success:not(:disabled):not(.disabled):focus{ box-shadow: none; }</summary></entry></feed>