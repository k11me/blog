<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.7.4">Jekyll</generator><link href="http://localhost:4000/atom.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2019-06-17T12:17:28+08:00</updated><id>http://localhost:4000/atom.xml</id><title type="html">Keleven.Me</title><subtitle>千变万化的是世界</subtitle><author><name>K11</name></author><entry><title type="html">日常</title><link href="http://localhost:4000/living/2019/06/17/blog/" rel="alternate" type="text/html" title="日常" /><published>2019-06-17T08:00:00+08:00</published><updated>2019-06-17T08:00:00+08:00</updated><id>http://localhost:4000/living/2019/06/17/blog</id><content type="html" xml:base="http://localhost:4000/living/2019/06/17/blog/">&lt;h1 id=&quot;日常&quot;&gt;日常&lt;/h1&gt;

&lt;p&gt;HK的结果貌似不错&lt;/p&gt;</content><author><name>K11</name></author><category term="日记" /><summary type="html">日常 HK的结果貌似不错</summary></entry><entry><title type="html">HK</title><link href="http://localhost:4000/living/2019/06/13/blog/" rel="alternate" type="text/html" title="HK" /><published>2019-06-13T08:00:00+08:00</published><updated>2019-06-13T08:00:00+08:00</updated><id>http://localhost:4000/living/2019/06/13/blog</id><content type="html" xml:base="http://localhost:4000/living/2019/06/13/blog/">&lt;h1 id=&quot;祭品&quot;&gt;祭品&lt;/h1&gt;

&lt;p&gt;100w+ 的祭品 看天朝如何吧&lt;/p&gt;</content><author><name>K11</name></author><category term="日记" /><summary type="html">祭品 100w+ 的祭品 看天朝如何吧</summary></entry><entry><title type="html">哎……</title><link href="http://localhost:4000/living/2019/06/05/blog/" rel="alternate" type="text/html" title="哎……" /><published>2019-06-05T08:00:00+08:00</published><updated>2019-06-05T08:00:00+08:00</updated><id>http://localhost:4000/living/2019/06/05/blog</id><content type="html" xml:base="http://localhost:4000/living/2019/06/05/blog/">&lt;h1 id=&quot;哎&quot;&gt;哎……&lt;/h1&gt;

&lt;p&gt;恬不知耻 赤裸裸的威胁 估计也没什么用……&lt;/p&gt;</content><author><name>K11</name></author><category term="日记" /><summary type="html">哎…… 恬不知耻 赤裸裸的威胁 估计也没什么用……</summary></entry><entry><title type="html">30日了~</title><link href="http://localhost:4000/living/2019/05/30/blog/" rel="alternate" type="text/html" title="30日了~" /><published>2019-05-30T08:00:00+08:00</published><updated>2019-05-30T08:00:00+08:00</updated><id>http://localhost:4000/living/2019/05/30/blog</id><content type="html" xml:base="http://localhost:4000/living/2019/05/30/blog/">&lt;h1 id=&quot;更新了&quot;&gt;更新了&lt;/h1&gt;

&lt;p&gt;在自动化的道路上越走越远了……&lt;/p&gt;

&lt;p&gt;毕竟一个人能观察的有限……&lt;/p&gt;</content><author><name>K11</name></author><category term="日记" /><summary type="html">更新了 在自动化的道路上越走越远了…… 毕竟一个人能观察的有限……</summary></entry><entry><title type="html">更新了~</title><link href="http://localhost:4000/living/2019/05/23/blog/" rel="alternate" type="text/html" title="更新了~" /><published>2019-05-23T08:00:00+08:00</published><updated>2019-05-23T08:00:00+08:00</updated><id>http://localhost:4000/living/2019/05/23/blog</id><content type="html" xml:base="http://localhost:4000/living/2019/05/23/blog/">&lt;h1 id=&quot;果然发生&quot;&gt;果然发生&lt;/h1&gt;

&lt;p&gt;💊💊💊💊💊💊&lt;/p&gt;

&lt;h1 id=&quot;车门被划&quot;&gt;车门被划&lt;/h1&gt;

&lt;p&gt;不知道什么用钥匙划了车门……&lt;/p&gt;

&lt;p&gt;要自己补漆了…… 等工具中…… 效果未知……&lt;/p&gt;

&lt;h1 id=&quot;人言&quot;&gt;人言&lt;/h1&gt;

&lt;p&gt;不论是说出口的 还是写下来的&lt;/p&gt;

&lt;p&gt;都会在不知道的情况产出影响……&lt;/p&gt;

&lt;p&gt;然而大多数人不知道这点……&lt;/p&gt;

&lt;h1 id=&quot;脖子疼&quot;&gt;脖子疼&lt;/h1&gt;

&lt;p&gt;脖子右边疼 也不知道是怎么了…… 好几天了……&lt;/p&gt;</content><author><name>K11</name></author><category term="日记" /><summary type="html">果然发生 💊💊💊💊💊💊 车门被划 不知道什么用钥匙划了车门…… 要自己补漆了…… 等工具中…… 效果未知…… 人言 不论是说出口的 还是写下来的 都会在不知道的情况产出影响…… 然而大多数人不知道这点…… 脖子疼 脖子右边疼 也不知道是怎么了…… 好几天了……</summary></entry><entry><title type="html">呵呵</title><link href="http://localhost:4000/living/2019/05/17/blog/" rel="alternate" type="text/html" title="呵呵" /><published>2019-05-17T08:00:00+08:00</published><updated>2019-05-17T08:00:00+08:00</updated><id>http://localhost:4000/living/2019/05/17/blog</id><content type="html" xml:base="http://localhost:4000/living/2019/05/17/blog/">&lt;h1 id=&quot;呵呵呵&quot;&gt;呵呵呵&lt;/h1&gt;

&lt;p&gt;从今天开始只对自己负责&lt;/p&gt;</content><author><name>K11</name></author><category term="日记" /><summary type="html">呵呵呵 从今天开始只对自己负责</summary></entry><entry><title type="html">更新了~</title><link href="http://localhost:4000/living/2019/05/07/blog/" rel="alternate" type="text/html" title="更新了~" /><published>2019-05-07T08:00:00+08:00</published><updated>2019-05-07T08:00:00+08:00</updated><id>http://localhost:4000/living/2019/05/07/blog</id><content type="html" xml:base="http://localhost:4000/living/2019/05/07/blog/">&lt;h1 id=&quot;google-cloud&quot;&gt;Google Cloud&lt;/h1&gt;

&lt;p&gt;有点小问题，重启后正常……&lt;/p&gt;</content><author><name>K11</name></author><category term="日记" /><summary type="html">Google Cloud 有点小问题，重启后正常……</summary></entry><entry><title type="html">docker 与 netplan 的坑</title><link href="http://localhost:4000/living/2019/04/30/blog/" rel="alternate" type="text/html" title="docker 与 netplan 的坑" /><published>2019-04-30T08:00:00+08:00</published><updated>2019-04-30T08:00:00+08:00</updated><id>http://localhost:4000/living/2019/04/30/blog</id><content type="html" xml:base="http://localhost:4000/living/2019/04/30/blog/">&lt;h1 id=&quot;docker-与-netplan-的坑&quot;&gt;docker 与 netplan 的坑&lt;/h1&gt;

&lt;p&gt;使用&lt;code class=&quot;highlighter-rouge&quot;&gt;netplan&lt;/code&gt; 设置 IP 后&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;docker&lt;/code&gt; 服务就不能正常启动了&lt;/p&gt;

&lt;p&gt;怀疑是&lt;code class=&quot;highlighter-rouge&quot;&gt;netplan&lt;/code&gt;的问题&lt;/p&gt;

&lt;p&gt;谷歌也没有结果……&lt;/p&gt;

&lt;p&gt;无奈，退一步改项目上传地址吧~&lt;/p&gt;</content><author><name>K11</name></author><category term="日记" /><summary type="html">docker 与 netplan 的坑 使用netplan 设置 IP 后 docker 服务就不能正常启动了 怀疑是netplan的问题 谷歌也没有结果…… 无奈，退一步改项目上传地址吧~</summary></entry><entry><title type="html">gitlab 调整</title><link href="http://localhost:4000/living/2019/04/20/blog/" rel="alternate" type="text/html" title="gitlab 调整" /><published>2019-04-20T08:00:00+08:00</published><updated>2019-04-20T08:00:00+08:00</updated><id>http://localhost:4000/living/2019/04/20/blog</id><content type="html" xml:base="http://localhost:4000/living/2019/04/20/blog/">&lt;h1 id=&quot;ubuntu-分区小了&quot;&gt;Ubuntu 分区小了&lt;/h1&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;gitlab&lt;/code&gt; 镜像越来越大了，终于空间不够用了……&lt;/p&gt;

&lt;h2 id=&quot;gitlab-备份&quot;&gt;gitlab 备份&lt;/h2&gt;

&lt;h3 id=&quot;备份项目&quot;&gt;备份项目&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker exec -t &amp;lt;container name&amp;gt; gitlab-rake gitlab:backup:create
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;注意备份&lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose.yml&lt;/code&gt; 文件&lt;/p&gt;

&lt;h3 id=&quot;备份设置文件&quot;&gt;备份设置文件&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker exec -t &amp;lt;your container name&amp;gt; /bin/sh -c 'umask 0077; tar cfz /secret/gitlab/backups/$(date &quot;+etc-gitlab-\%s.tgz&quot;) -C / etc/gitlab'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;注意 &lt;code class=&quot;highlighter-rouge&quot;&gt;/secret/gitlab/backups/&lt;/code&gt; 在本地的文件挂载。&lt;/p&gt;

&lt;p&gt;备份文件在&lt;code class=&quot;highlighter-rouge&quot;&gt;/var/opt/gitlab/backups&lt;/code&gt; 中 注意导出。&lt;/p&gt;

&lt;p&gt;还原是注意 &lt;code class=&quot;highlighter-rouge&quot;&gt;镜像版本&lt;/code&gt; 的一致性。 不一致时有错误提示。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.gitlab.com/omnibus/settings/backups.html&quot;&gt;参考文档 1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;准备工作完成&lt;/p&gt;

&lt;h2 id=&quot;重新安装-ubuntu&quot;&gt;重新安装 ubuntu&lt;/h2&gt;

&lt;p&gt;下载最新&lt;code class=&quot;highlighter-rouge&quot;&gt;ubuntu&lt;/code&gt;镜像安装。&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;UI&lt;/code&gt; 比之前强点……&lt;/p&gt;

&lt;p&gt;注意开启&lt;code class=&quot;highlighter-rouge&quot;&gt;openssh&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;设置-ssh&quot;&gt;设置 ssh&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo nano /etc/ssh/sshd_config
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;修改端口&lt;code class=&quot;highlighter-rouge&quot;&gt;Port 22&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;添加-公钥&quot;&gt;添加 公钥&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mkdir .ssh
nano authorized_keys
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;复制公钥到&lt;code class=&quot;highlighter-rouge&quot;&gt;authorized_keys&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;重启-ssh-服务&quot;&gt;重启 ssh 服务&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo service sshd restart
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;安装-zsh&quot;&gt;安装 zsh&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo apt install zsh

chsh -s $(which zsh)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;重新登录后检测&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;echo $SHELL
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;安装-oh-my-zsh&quot;&gt;安装 oh my zsh&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;设置zshrc&quot;&gt;设置&lt;code class=&quot;highlighter-rouge&quot;&gt;~/.zshrc&lt;/code&gt;&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ZSH_THEME=&quot;agnoster&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;安装powerline-fonts&quot;&gt;安装powerline fonts&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo apt-get install fonts-powerline
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;安装-docker&quot;&gt;安装 docker&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.docker.com/install/linux/docker-ce/ubuntu/&quot;&gt;参考&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;更新包资源&quot;&gt;更新包资源&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo apt-get update
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;安装必要包&quot;&gt;安装必要包&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo apt-get install \
    apt-transport-https \
    ca-certificates \
    curl \
    gnupg-agent \
    software-properties-common
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;安装公钥&quot;&gt;安装公钥&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;验证公钥&quot;&gt;验证公钥&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo apt-key fingerprint 0EBFCD88
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;指定版本&quot;&gt;指定版本&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo add-apt-repository \
   &quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \
   $(lsb_release -cs) \
   stable&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;安装&quot;&gt;安装&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo apt-get install docker-ce docker-ce-cli containerd.io
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;免去sudo&quot;&gt;免去sudo&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo groupadd docker
sudo usermod -aG docker $USER
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;安装docker-compose&quot;&gt;安装docker-compose&lt;/h3&gt;

&lt;h4 id=&quot;安装-1&quot;&gt;安装&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.24.0/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;提权&quot;&gt;提权&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo chmod +x /usr/local/bin/docker-compose
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;创建链接&quot;&gt;创建链接&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;还原-gitlab-备份&quot;&gt;还原 gitlab 备份&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker exec -it &amp;lt;container name&amp;gt; gitlab-rake gitlab:backup:restore
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;注意将文件挂载到&lt;code class=&quot;highlighter-rouge&quot;&gt;/var/opt/gitlab/backups&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;修改ip&quot;&gt;修改ip&lt;/h2&gt;

&lt;h3 id=&quot;ip设置文件位置&quot;&gt;ip设置文件位置&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ls /etc/netplan/
cd /etc/netplan/
sudo nano 50-cloud-init.yaml

sudo nano /etc/netplan/50-cloud-init.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;修改内容&quot;&gt;修改内容&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;enp0s3:
    addresses: [192.168.13.131/24]
    gateway4: 192.168.13.1
    dhcp4: no
    nameservers:
      addresses: [1.1.1.1]
    optional: true

docker0: 
    addresses: [172.17.0.1/16]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;原本内容&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;enp0s3:
    dhcp4: true
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;确认更改&quot;&gt;确认更改&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo netplan apply
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;其他&quot;&gt;其他&lt;/h3&gt;

&lt;p&gt;确认正在使用的ip&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ip addr
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>K11</name></author><category term="日记" /><summary type="html">Ubuntu 分区小了 gitlab 镜像越来越大了，终于空间不够用了…… gitlab 备份 备份项目 docker exec -t &amp;lt;container name&amp;gt; gitlab-rake gitlab:backup:create 注意备份docker-compose.yml 文件 备份设置文件 docker exec -t &amp;lt;your container name&amp;gt; /bin/sh -c 'umask 0077; tar cfz /secret/gitlab/backups/$(date &quot;+etc-gitlab-\%s.tgz&quot;) -C / etc/gitlab' 注意 /secret/gitlab/backups/ 在本地的文件挂载。 备份文件在/var/opt/gitlab/backups 中 注意导出。 还原是注意 镜像版本 的一致性。 不一致时有错误提示。 参考文档 1 准备工作完成 重新安装 ubuntu 下载最新ubuntu镜像安装。 UI 比之前强点…… 注意开启openssh 设置 ssh sudo nano /etc/ssh/sshd_config 修改端口Port 22 添加 公钥 mkdir .ssh nano authorized_keys 复制公钥到authorized_keys 重启 ssh 服务 sudo service sshd restart 安装 zsh sudo apt install zsh chsh -s $(which zsh) 重新登录后检测 echo $SHELL 安装 oh my zsh sh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot; 设置~/.zshrc ZSH_THEME=&quot;agnoster&quot; 安装powerline fonts sudo apt-get install fonts-powerline 安装 docker 参考 更新包资源 sudo apt-get update 安装必要包 sudo apt-get install \ apt-transport-https \ ca-certificates \ curl \ gnupg-agent \ software-properties-common 安装公钥 curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - 验证公钥 sudo apt-key fingerprint 0EBFCD88 指定版本 sudo add-apt-repository \ &quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \ $(lsb_release -cs) \ stable&quot; 安装 sudo apt-get install docker-ce docker-ce-cli containerd.io 免去sudo sudo groupadd docker sudo usermod -aG docker $USER 安装docker-compose 安装 sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.24.0/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose 提权 sudo chmod +x /usr/local/bin/docker-compose 创建链接 sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose 还原 gitlab 备份 docker exec -it &amp;lt;container name&amp;gt; gitlab-rake gitlab:backup:restore 注意将文件挂载到/var/opt/gitlab/backups 修改ip ip设置文件位置 ls /etc/netplan/ cd /etc/netplan/ sudo nano 50-cloud-init.yaml sudo nano /etc/netplan/50-cloud-init.yaml 修改内容 enp0s3: addresses: [192.168.13.131/24] gateway4: 192.168.13.1 dhcp4: no nameservers: addresses: [1.1.1.1] optional: true docker0: addresses: [172.17.0.1/16] 原本内容 enp0s3: dhcp4: true 确认更改 sudo netplan apply 其他 确认正在使用的ip ip addr</summary></entry><entry><title type="html">记录读取</title><link href="http://localhost:4000/living/2019/04/17/blog/" rel="alternate" type="text/html" title="记录读取" /><published>2019-04-17T08:00:00+08:00</published><updated>2019-04-17T08:00:00+08:00</updated><id>http://localhost:4000/living/2019/04/17/blog</id><content type="html" xml:base="http://localhost:4000/living/2019/04/17/blog/">&lt;h1 id=&quot;11日的份&quot;&gt;11日的份&lt;/h1&gt;

&lt;h2 id=&quot;laravel-passport-scopes&quot;&gt;laravel passport scopes&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;scopes&lt;/code&gt; 为单组有效模式。&lt;/p&gt;

&lt;h2 id=&quot;其他&quot;&gt;其他&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;github&lt;/code&gt;的 &lt;code class=&quot;highlighter-rouge&quot;&gt;2FA&lt;/code&gt; 重置了 过程 大概一周吧……&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;17日的份&quot;&gt;17日的份&lt;/h1&gt;

&lt;p&gt;无事&lt;/p&gt;</content><author><name>K11</name></author><category term="日记" /><summary type="html">11日的份 laravel passport scopes scopes 为单组有效模式。 其他 github的 2FA 重置了 过程 大概一周吧…… 17日的份 无事</summary></entry></feed>